---
import { getRelativeLocaleUrl } from "astro:i18n";
import { useTranslations } from "../i18n/utils";
import { lenguageList } from "../i18n/ui";

const currentLang = Astro.currentLocale || "es";

const traslateLabels = useTranslations(
  currentLang as keyof typeof lenguageList
);
---
<nav class="w-full h-[10vh] text-white px-6 flex items-center justify-between mt-4">
  <figure class="w-12 h-12 rounded-full overflow-hidden border-2 border-white shadow-md">
    <img
      src="/Foto_perfil.jpeg"
      alt="Foto de perfil"
      class="w-full h-full object-cover"
    />
  </figure>

  <div class="relative">
    <button
      onclick="document.getElementById('langMenu').classList.toggle('hidden')"
      class="flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-md hover:bg-white/20 transition text-sm"
    >
      ğŸŒ {traslateLabels("layout.lenguage")}

      <svg
        class="w-4 h-4"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M19 9l-7 7-7-7"
        ></path>
      </svg>
    </button>

    <ul
      id="langMenu"
      class="hidden absolute right-0 mt-2 w-40 bg-white/10 backdrop-blur-lg border border-white/20 rounded-md shadow-xl p-2 animate-fade-in"
    >
      {
        Object.entries(lenguageList).map(([key, label]: [string, string]) => (
          <li>
            <a
              href={`/${key}`}
              class="flex items-center gap-2 px-3 py-2 hover:bg-white/20 rounded-md transition text-sm"
            >
              <span class="text-lg">
                {key === "es" && "ğŸ‡²ğŸ‡½"}
                {key === "en" && "ğŸ‡ºğŸ‡¸"}
              </span>
              {label}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</nav>
